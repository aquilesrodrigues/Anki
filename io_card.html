/** **************************************************************************
*    Card IO Card
*    Insert front model
*    create fields :ID, Header, Image, Question Mask, Footer, Sources, Listen, 
     Extra, Answer Mask, Original Mask
*   **************************************************************************
*/

{{#Image}}
<div id="io-header">{{Header}}</div>
<div id="io-wrapper">
  <div id="io-overlay">{{Question Mask}}</div>
  <div id="io-original">{{Image}}</div>
</div>
<div id="io-footer">{{Footer}}</div>

<script>
// Prevent original image from loading before mask
aFade = 50, qFade = 0;
var mask = document.querySelector('#io-overlay>img');
function loaded() {
    var original = document.querySelector('#io-original');
    original.style.visibility = "visible";
}
if (mask === null || mask.complete) {
    loaded();
} else {
    mask.addEventListener('load', loaded);
}
</script>
{{/Image}}


*******************

{{#Image}}
<div id="io-header">{{Header}}</div>
<div id="io-wrapper">
  <div id="io-overlay">{{Answer Mask}}</div>
  <div id="io-original">{{Image}}</div>
</div>
{{#Footer}}
	<div id="io-footer">{{Footer}}
	</div>{{/Footer}}
	<button id="io-revl-btn" onclick="toggle();">
		Toggle Masks
	</button>
	<div id="io-extra-wrapper">
  		<div id="io-extra">
    		{{#Remarks}}
      			<div class="io-extra-entry">
        			<div class="io-field-descr">Remarks</div>{{Remarks}}
      			</div>
    	{{/Remarks}}
    	{{#Listen}}
      		<div class="io-extra-entry">
        		<div class="io-field-descr">Listen</div>{{Listen}}
      		</div>
    	{{/Listen}}
    	{{#Extra}}
      		<div class="io-extra-entry">
        			<div class="io-field-descr">Extra</div>{{Extra}}
      		</div>
    	{{/Extra}}
    	{{#Sources}}
      		<div class="io-extra-entry">
        		<div class="io-field-descr">Sources</div>{{Sources}}
      		</div>
    	{{/Sources}}
  </div>
</div>

<script>
// Toggle answer mask on clicking the image
var toggle = function() {
  var amask = document.getElementById('io-overlay');
  if (amask.style.display === 'block' || amask.style.display === '')
    amask.style.display = 'none';
  else
    amask.style.display = 'block'
}

// Prevent original image from loading before mask
aFade = 50, qFade = 0;
var mask = document.querySelector('#io-overlay>img');
function loaded() {
    var original = document.querySelector('#io-original');
    original.style.visibility = "visible";
}
if (mask === null || mask.complete) {
    loaded();
} else {
    mask.addEventListener('load', loaded);
}
</script>
{{/Image}}


